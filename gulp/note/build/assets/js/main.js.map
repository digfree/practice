{"version":3,"sources":["test.js"],"names":["DelItem","Vue","extend","props","template","data","startX","moveX","disX","txtStyle","computed","methods","_touchStart","ev","event","w","$refs","remove","offsetWidth","touches","length","idx","currentItem","getAttribute","len","parentNode","children","current","getElementsByTagName","match","String","preventDefault","i","item","s","style","transform","clientX","_touchMove","_touchEnd","changedTouches","endX","deleteItem","index","splice","component","el","dataList","mounted","show","name","url","toggleShare","target","child","tagUl","tagP","className","display","tagPList","j","t","Number","toggle","nextSibling","toggle2"],"mappings":"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","file":"main.js","sourcesContent":["var DelItem = Vue.extend({\r\n  props: ['item1', 'item2', 'index2'],\r\n  template: '<li ref=\"currentItem\" :index=\"index2\">'\r\n    + '<a :href=\"item2.url\">'\r\n    + '<span class=\"del-btn\" @click.prevent=\"deleteItem(item1.children,index2)\" ref=\"remove\">删除</span>'\r\n    + '<p'\r\n    + '@touchstart=\"_touchStart\"'\r\n    + '@touchmove.prevent=\"_touchMove\"'\r\n    + '@touchend=\"_touchEnd\"'\r\n    + ':style=\"txtStyle\">'\r\n    + '{{item2.name}}'\r\n    + '</p>'\r\n    + '</a>'\r\n    + '</li>',\r\n  data: function () {\r\n    return {\r\n      startX: 0, //触摸位置\r\n      moveX: 0, //滑动时的位置\r\n      disX: 0, //移动距离\r\n      txtStyle: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    _touchStart: function (ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.touches.length == 1) {\r\n        var idx = this.$refs.currentItem.getAttribute('index');\r\n        //当前元素的父元素ul的子元素li的个数\r\n        var len = this.$refs.currentItem.parentNode.children.length;\r\n        var current = this.$refs.currentItem.parentNode.children[idx].getElementsByTagName('p')[0].getAttribute('style');\r\n        if (typeof current != 'undefined' && current != null && current.match(/\\d+/)[0] == String(w)) {\r\n          ev.preventDefault();\r\n        }\r\n        for (var i = 0; i < len; i++) {\r\n          if (i == idx) continue;\r\n          var item = this.$refs.currentItem.parentNode.children[i];\r\n          var s = item.getElementsByTagName('p')[0].getAttribute('style');\r\n          if (typeof s != 'undefined' && s != null && s.match(/\\d+/)[0] == String(w)) {\r\n            item.getElementsByTagName('p')[0].style.transform = 'translateX(0px)';\r\n            ev.preventDefault();\r\n          }\r\n        }\r\n        this.startX = ev.touches[0].clientX;\r\n      }\r\n    },\r\n    _touchMove: function (ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.touches.length == 1) {\r\n        this.moveX = ev.touches[0].clientX;\r\n        this.disX = this.startX - this.moveX;\r\n        if (this.disX < 0 || this.disX == 0) {\r\n          this.txtStyle = \"transform: translateX(0px)\";\r\n        } else {\r\n          this.txtStyle = \"transform: translateX(-\" + this.disX + \"px)\";\r\n          if (this.disX >= w) {\r\n            this.txtStyle = \"transform: translateX(-\" + w + \"px)\";\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _touchEnd: function (ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.changedTouches.length == 1) {\r\n        var endX = ev.changedTouches[0].clientX;\r\n        this.disX = this.startX - endX;\r\n        if (this.disX < w / 2) {\r\n          this.txtStyle = \"transform: translateX(0px)\";\r\n        } else {\r\n          this.txtStyle = \"transform: translateX(-\" + w + \"px)\";\r\n        }\r\n      }\r\n    },\r\n    deleteItem: function (item, index) {\r\n      this.txtStyle = \"transform: translateX(0px)\";\r\n      item.splice(index, 1);\r\n    }\r\n  }\r\n});\r\n\r\nVue.component('del-item', DelItem);  //注册全局组件del-item\r\n\r\nnew Vue({\r\n  el: \"#el\",\r\n  data: {\r\n    dataList: [],\r\n  },\r\n  mounted: function () {\r\n    this.dataList = [\r\n      {\r\n        show: false,\r\n        name: 2018,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2018-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"//baidu.com\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"//baidu.com\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            show: false,\r\n            name: \"2018-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        show: false,\r\n        name: 2017,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2017-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            show: false,\r\n            name: \"2017-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n  },\r\n  methods: {\r\n    toggleShare: function (item) {\r\n      var ev = ev || event;\r\n      var idx = ev.target.getAttribute('index');\r\n      var len = ev.target.parentNode.parentNode.children.length;\r\n      item.show = false;\r\n      for (var i = 0; i < len; i++) {\r\n        var child = ev.target.parentNode.parentNode.children[i];\r\n        var tagUl = child.getElementsByTagName('ul')[0];\r\n        var tagP = child.getElementsByTagName('p')[0];\r\n        if (i == idx) {\r\n          if (tagP.className == '') {\r\n            tagP.className = 'active';\r\n            tagUl.style.display = 'block';\r\n          } else {\r\n            item.show = true;\r\n          }\r\n        } else {\r\n          tagP.className = '';\r\n          tagUl.style.display = 'none';\r\n        }\r\n      }\r\n      //重置del\r\n      var tagPList = ev.target.parentNode.parentNode.getElementsByTagName('p');\r\n      for (var j = 0; j < tagPList.length; j++) {\r\n        var t = tagPList[j].style.transform;\r\n        if (typeof t != 'undefined' && Number(t.match(/\\d+/)) > 0) {\r\n          tagPList[j].style.transform = 'translateX(0px)';\r\n        }\r\n      }\r\n      \r\n      item.show = !item.show;\r\n    },\r\n    toggle: function (item) {\r\n      this.toggleShare(item);\r\n      \r\n      //重置2级ul\r\n      var ev = ev || event;\r\n      var tagP = ev.target.nextSibling.nextSibling.getElementsByTagName('p');\r\n      for(var i = 0;i< tagP.length;i++){\r\n        if(tagP[i].className == 'active'){\r\n          tagP[i].className = '';\r\n          tagP[i].nextSibling.nextSibling.style.display = 'none';\r\n        }\r\n      }\r\n    },\r\n    toggle2(item) {\r\n      this.toggleShare(item);\r\n\r\n    },\r\n  }\r\n});\r\n"]}