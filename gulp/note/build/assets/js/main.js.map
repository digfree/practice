{"version":3,"sources":["test.js"],"names":["DelItem","Vue","extend","props","template","data","startX","moveX","disX","methods","computeStyle","result","_touchStart","current","ev","event","w","$refs","remove","offsetWidth","_this","touches","length","style","match","String","preventDefault","item1","children","forEach","item","$set","clientX","_touchMove","_touchEnd","changedTouches","endX","deleteItem","index","splice","component","el","dataList","mounted","name","url","show","item2","resetDelStatus","item3","Number","toggle","toggle2"],"mappings":"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","file":"main.js","sourcesContent":["var DelItem = Vue.extend({\r\n  props: ['item1', 'item2', 'index2'],\r\n  template: '<li ref=\"currentItem\" :index=\"index2\">'\r\n    + '<a :href=\"item2.url\">'\r\n    + '<span class=\"del-btn\" @click.prevent=\"deleteItem(item1.children,index2)\" ref=\"remove\">删除</span>'\r\n    + '<p'\r\n    + '@touchstart=\"_touchStart(item2)\"'\r\n    + '@touchmove.prevent=\"_touchMove(item2)\"'\r\n    + '@touchend=\"_touchEnd(item2)\"'\r\n    + ':style=\"item2.style\">'\r\n    + '{{item2.name}}'\r\n    + '</p>'\r\n    + '</a>'\r\n    + '</li>',\r\n  data: function () {\r\n    return {\r\n      startX: 0, //触摸位置\r\n      moveX: 0, //滑动时的位置\r\n      disX: 0, //移动距离\r\n    };\r\n  },\r\n  methods: {\r\n    computeStyle: function (result) {\r\n      return 'transform: translateX(' + result + 'px)';\r\n    },\r\n    _touchStart: function (current) {\r\n      var ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      var _this = this;\r\n      if (ev.touches.length == 1) {\r\n        if (typeof current.style != 'undefined' && current.style != null && current.style.match(/\\d+/)[0] == String(w)) ev.preventDefault();\r\n        this.item1.children.forEach(function (item) {\r\n          if(item == current) return false;\r\n          if (typeof item.style != 'undefined' && item.style != null && item.style.match(/\\d+/)[0] == String(w)) {\r\n            _this.$set(item,'style',_this.computeStyle('0'));\r\n            ev.preventDefault();\r\n          }\r\n        });\r\n        this.startX = ev.touches[0].clientX;\r\n      }\r\n    },\r\n    _touchMove: function (current) {\r\n      var ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.touches.length == 1) {\r\n        this.moveX = ev.touches[0].clientX;\r\n        this.disX = this.startX - this.moveX;\r\n        if (this.disX < 0 || this.disX == 0) {\r\n          this.$set(current,'style',this.computeStyle('0'));\r\n        } else {\r\n          this.$set(current,'style',this.computeStyle('-' + this.disX));\r\n          if (this.disX >= w) {\r\n            this.$set(current,'style',this.computeStyle('-' + w));\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _touchEnd: function (current) {\r\n      var ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.changedTouches.length == 1) {\r\n        var endX = ev.changedTouches[0].clientX;\r\n        this.disX = this.startX - endX;\r\n        if (this.disX < w / 2) {\r\n          this.$set(current,'style',this.computeStyle('0'));\r\n        } else {\r\n          this.$set(current,'style',this.computeStyle('-' + w));\r\n        }\r\n      }\r\n    },\r\n    deleteItem: function (item, index) {\r\n      this.computeStyle('0');\r\n      item.splice(index, 1);\r\n    }\r\n  }\r\n});\r\n\r\nVue.component('del-item', DelItem);  //注册全局组件del-item\r\n\r\nnew Vue({\r\n  el: \"#el\",\r\n  data: {\r\n    dataList: [],\r\n  },\r\n  mounted: function () {\r\n    this.dataList = [\r\n      {\r\n        name: 2018,\r\n        children: [\r\n          {\r\n            name: \"2018-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"//baidu.com\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"//baidu.com\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            name: \"2018-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"//baidu.com\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"//baidu.com\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        name: 2017,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2017-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            name: \"2017-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n    var _this = this;\r\n    this.dataList.forEach(function (item) {\r\n      _this.$set(item, 'show', false);\r\n      item.children.forEach(function (item2) {\r\n        _this.$set(item2, 'show', false);\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    resetDelStatus: function () {\r\n      var _this = this;\r\n      this.dataList.forEach(function (item) {\r\n        item.children.forEach(function (item2) {\r\n          item2.children.forEach(function (item3) {\r\n            if(typeof item3.style != 'undefined' && Number(item3.style.match(/\\d+/)) != 0){\r\n              _this.$set(item3, 'style', 'transform: translateX(0px)');\r\n            }\r\n          });\r\n        });\r\n      });\r\n    },\r\n    toggle: function (current) {\r\n      this.dataList.forEach(function (item) {\r\n        if (item == current) {\r\n          item.show = !item.show;\r\n        } else {\r\n          item.show = false;\r\n        }\r\n        item.children.forEach(function (item2) {\r\n          if (item2.show) {\r\n            item2.show = false;\r\n          }\r\n        });\r\n      });\r\n      this.resetDelStatus();\r\n    },\r\n    toggle2(current) {\r\n      this.dataList.forEach(function (item) {\r\n        item.children.forEach(function (item2) {\r\n          if (item2 == current) {\r\n            item2.show = !item2.show;\r\n          } else {\r\n            item2.show = false;\r\n          }\r\n        });\r\n      });\r\n      this.resetDelStatus();\r\n    }\r\n  }\r\n});\r\n"]}