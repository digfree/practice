{"version":3,"sources":["test.js"],"names":["DelItem","Vue","extend","props","template","data","startX","moveX","disX","txtStyle","computed","methods","_touchStart","ev","event","touches","length","len","this","$refs","currentItem","parentNode","children","idx","getAttribute","i","getElementsByTagName","setAttribute","clientX","_touchMove","w","remove","offsetWidth","_touchEnd","changedTouches","endX","deleteItem","item","index","splice","component","el","dataList","mounted","show","name","url","toggle","target"],"mappings":"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","file":"main.min.js","sourcesContent":["var DelItem = Vue.extend({\r\n  props:['item1','item2','index2'],\r\n  template:'<li ref=\"currentItem\" :index=\"index2\">'\r\n  +'<a :href=\"item2.url\">'\r\n  + '<span class=\"del-btn\" @click.prevent=\"deleteItem(item1.children,index2)\" ref=\"remove\">删除</span>'\r\n  + '<p'\r\n    +  '@touchstart.prevent=\"_touchStart\"'\r\n    +  '@touchmove.prevent=\"_touchMove\"'\r\n    +  '@touchend=\"_touchEnd\"'\r\n    +  ':style=\"txtStyle\">'\r\n    +  '{{item2.name}}'\r\n    +'</p>'\r\n  +'</a>'\r\n  +'</li>',\r\n  data: function() {\r\n    return {\r\n      startX: 0, //触摸位置\r\n      moveX: 0, //滑动时的位置\r\n      disX: 0, //移动距离\r\n      txtStyle: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    _touchStart: function(ev) {\r\n      ev = ev || event;\r\n      if (ev.touches.length == 1) {\r\n        var len = this.$refs.currentItem.parentNode.children.length;\r\n        var idx = this.$refs.currentItem.getAttribute('index');\r\n        for(var i = 0;i<len;i++){\r\n          if(i == idx) continue;\r\n          this.$refs.currentItem.parentNode.children[i].getElementsByTagName('p')[0].setAttribute('style',\"transform: translateX(0px)\");\r\n        }\r\n        this.startX = ev.touches[0].clientX;\r\n      }\r\n    },\r\n    _touchMove: function(ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.touches.length == 1) {\r\n        this.moveX = ev.touches[0].clientX;\r\n        this.disX = this.startX - this.moveX;\r\n        if (this.disX < 0 || this.disX == 0) {\r\n          this.txtStyle = \"transform: translateX(0px)\";\r\n        } else {\r\n          this.txtStyle = \"transform: translateX(-\" + this.disX + \"px)\";\r\n          if (this.disX >= w) {\r\n            this.txtStyle = \"transform: translateX(-\" + w + \"px)\";\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _touchEnd: function(ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.changedTouches.length == 1) {\r\n        var endX = ev.changedTouches[0].clientX;\r\n        this.disX = this.startX - endX;\r\n        if (this.disX < w / 2) {\r\n          this.txtStyle = \"transform: translateX(0px)\";\r\n        } else {\r\n          this.txtStyle = \"transform: translateX(-\" + w + \"px)\";\r\n        }\r\n      }\r\n    },\r\n    deleteItem: function(item, index) {\r\n      item.splice(index, 1);\r\n      this.txtStyle = \"transform: translateX(0px)\";\r\n    }\r\n  }\r\n});\r\n\r\nVue.component('del-item',DelItem);  //注册全局组件del-item\r\n\r\nnew Vue({\r\n  el: \"#el\",\r\n  data: {\r\n    dataList: [],\r\n  },\r\n  mounted: function() {\r\n    this.dataList = [\r\n      {\r\n        show: false,\r\n        name: 2018,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2018-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"//baidu.com\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章3\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            show: false,\r\n            name: \"2018-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章3\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        show: false,\r\n        name: 2017,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2017-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章3\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            show: false,\r\n            name: \"2017-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章3\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n  },\r\n  methods: {\r\n    toggle: function(item) {\r\n      var ev = ev || event;\r\n      item.show = !item.show;\r\n      if(item.show){\r\n        var len = ev.target.parentNode.parentNode.children.length;\r\n        var idx = ev.target.getAttribute('index');\r\n        for(var i = 0;i<len;i++){\r\n          if(i == idx) continue;\r\n          ev.target.parentNode.parentNode.children[i].getElementsByTagName('ul')[0].setAttribute('style','display: none');\r\n          ev.target.parentNode.parentNode.children[i].getElementsByTagName('p')[0].setAttribute('class','');\r\n        }\r\n      }\r\n    }\r\n  }\r\n});\r\n"]}