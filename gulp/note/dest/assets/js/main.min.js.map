{"version":3,"sources":["test.js"],"names":["DelItem","Vue","extend","props","template","data","startX","moveX","disX","txtStyle","computed","methods","_touchStart","ev","event","w","this","$refs","remove","offsetWidth","touches","length","idx","currentItem","getAttribute","len","parentNode","children","current","getElementsByTagName","match","String","preventDefault","i","item","s","style","transform","clientX","_touchMove","_touchEnd","changedTouches","endX","deleteItem","index","splice","component","el","dataList","mounted","show","name","url","toggleShare","target","child","tagUl","tagP","className","display","tagPList","j","t","Number","toggle","nextSibling","toggle2"],"mappings":"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","file":"main.min.js","sourcesContent":["var DelItem = Vue.extend({\r\n  props: ['item1', 'item2', 'index2'],\r\n  template: '<li ref=\"currentItem\" :index=\"index2\">'\r\n    + '<a :href=\"item2.url\">'\r\n    + '<span class=\"del-btn\" @click.prevent=\"deleteItem(item1.children,index2)\" ref=\"remove\">删除</span>'\r\n    + '<p'\r\n    + '@touchstart=\"_touchStart\"'\r\n    + '@touchmove.prevent=\"_touchMove\"'\r\n    + '@touchend=\"_touchEnd\"'\r\n    + ':style=\"txtStyle\">'\r\n    + '{{item2.name}}'\r\n    + '</p>'\r\n    + '</a>'\r\n    + '</li>',\r\n  data: function () {\r\n    return {\r\n      startX: 0, //触摸位置\r\n      moveX: 0, //滑动时的位置\r\n      disX: 0, //移动距离\r\n      txtStyle: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    _touchStart: function (ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.touches.length == 1) {\r\n        var idx = this.$refs.currentItem.getAttribute('index');\r\n        //当前元素的父元素ul的子元素li的个数\r\n        var len = this.$refs.currentItem.parentNode.children.length;\r\n        var current = this.$refs.currentItem.parentNode.children[idx].getElementsByTagName('p')[0].getAttribute('style');\r\n        if (typeof current != 'undefined' && current != null && current.match(/\\d+/)[0] == String(w)) {\r\n          ev.preventDefault();\r\n        }\r\n        for (var i = 0; i < len; i++) {\r\n          if (i == idx) continue;\r\n          var item = this.$refs.currentItem.parentNode.children[i];\r\n          var s = item.getElementsByTagName('p')[0].getAttribute('style');\r\n          if (typeof s != 'undefined' && s != null && s.match(/\\d+/)[0] == String(w)) {\r\n            item.getElementsByTagName('p')[0].style.transform = 'translateX(0px)';\r\n            ev.preventDefault();\r\n          }\r\n        }\r\n        this.startX = ev.touches[0].clientX;\r\n      }\r\n    },\r\n    _touchMove: function (ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.touches.length == 1) {\r\n        this.moveX = ev.touches[0].clientX;\r\n        this.disX = this.startX - this.moveX;\r\n        if (this.disX < 0 || this.disX == 0) {\r\n          this.txtStyle = \"transform: translateX(0px)\";\r\n        } else {\r\n          this.txtStyle = \"transform: translateX(-\" + this.disX + \"px)\";\r\n          if (this.disX >= w) {\r\n            this.txtStyle = \"transform: translateX(-\" + w + \"px)\";\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _touchEnd: function (ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.changedTouches.length == 1) {\r\n        var endX = ev.changedTouches[0].clientX;\r\n        this.disX = this.startX - endX;\r\n        if (this.disX < w / 2) {\r\n          this.txtStyle = \"transform: translateX(0px)\";\r\n        } else {\r\n          this.txtStyle = \"transform: translateX(-\" + w + \"px)\";\r\n        }\r\n      }\r\n    },\r\n    deleteItem: function (item, index) {\r\n      this.txtStyle = \"transform: translateX(0px)\";\r\n      item.splice(index, 1);\r\n    }\r\n  }\r\n});\r\n\r\nVue.component('del-item', DelItem);  //注册全局组件del-item\r\n\r\nnew Vue({\r\n  el: \"#el\",\r\n  data: {\r\n    dataList: [],\r\n  },\r\n  mounted: function () {\r\n    this.dataList = [\r\n      {\r\n        show: false,\r\n        name: 2018,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2018-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"//baidu.com\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"//baidu.com\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            show: false,\r\n            name: \"2018-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        show: false,\r\n        name: 2017,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2017-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            show: false,\r\n            name: \"2017-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n  },\r\n  methods: {\r\n    toggleShare: function (item) {\r\n      var ev = ev || event;\r\n      var idx = ev.target.getAttribute('index');\r\n      var len = ev.target.parentNode.parentNode.children.length;\r\n      item.show = false;\r\n      for (var i = 0; i < len; i++) {\r\n        var child = ev.target.parentNode.parentNode.children[i];\r\n        var tagUl = child.getElementsByTagName('ul')[0];\r\n        var tagP = child.getElementsByTagName('p')[0];\r\n        if (i == idx) {\r\n          if (tagP.className == '') {\r\n            tagP.className = 'active';\r\n            tagUl.style.display = 'block';\r\n          } else {\r\n            item.show = true;\r\n          }\r\n        } else {\r\n          tagP.className = '';\r\n          tagUl.style.display = 'none';\r\n        }\r\n      }\r\n      //重置del\r\n      var tagPList = ev.target.parentNode.parentNode.getElementsByTagName('p');\r\n      for (var j = 0; j < tagPList.length; j++) {\r\n        var t = tagPList[j].style.transform;\r\n        if (typeof t != 'undefined' && Number(t.match(/\\d+/)) > 0) {\r\n          tagPList[j].style.transform = 'translateX(0px)';\r\n        }\r\n      }\r\n      \r\n      item.show = !item.show;\r\n    },\r\n    toggle: function (item) {\r\n      this.toggleShare(item);\r\n      \r\n      //重置2级ul\r\n      var ev = ev || event;\r\n      var tagP = ev.target.nextSibling.nextSibling.getElementsByTagName('p');\r\n      for(var i = 0;i< tagP.length;i++){\r\n        if(tagP[i].className == 'active'){\r\n          tagP[i].className = '';\r\n          tagP[i].nextSibling.nextSibling.style.display = 'none';\r\n        }\r\n      }\r\n    },\r\n    toggle2(item) {\r\n      this.toggleShare(item);\r\n\r\n    },\r\n  }\r\n});\r\n"]}