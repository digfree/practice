{"version":3,"sources":["test.js"],"names":["DelItem","Vue","extend","props","template","data","startX","moveX","disX","methods","computeStyle","result","_touchStart","current","ev","event","w","this","$refs","remove","offsetWidth","_this","touches","length","style","match","String","preventDefault","item1","children","forEach","item","$set","clientX","_touchMove","_touchEnd","changedTouches","endX","deleteItem","index","splice","component","el","dataList","mounted","name","url","show","item2","resetDelStatus","item3","Number","toggle","toggle2"],"mappings":"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","file":"main.min.js","sourcesContent":["var DelItem = Vue.extend({\r\n  props: ['item1', 'item2', 'index2'],\r\n  template: '<li ref=\"currentItem\">'\r\n    + '<a :href=\"item2.url\">'\r\n    + '<span class=\"del-btn\" @click.prevent=\"deleteItem(item1.children,index2)\" ref=\"remove\">删除</span>'\r\n    + '<p'\r\n    + '@touchstart=\"_touchStart(item2)\"'\r\n    + '@touchmove.prevent=\"_touchMove(item2)\"'\r\n    + '@touchend=\"_touchEnd(item2)\"'\r\n    + ':style=\"item2.style\">'\r\n    + '{{item2.name}}'\r\n    + '</p>'\r\n    + '</a>'\r\n    + '</li>',\r\n  data: function () {\r\n    return {\r\n      startX: 0, //触摸位置\r\n      moveX: 0, //滑动时的位置\r\n      disX: 0, //移动距离\r\n    };\r\n  },\r\n  methods: {\r\n    computeStyle: function (result) {\r\n      return 'transform: translateX(' + result + 'px)';\r\n    },\r\n    _touchStart: function (current) {\r\n      var ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      var _this = this;\r\n      if (ev.touches.length == 1) {\r\n        if (typeof current.style != 'undefined' && current.style != null && current.style.match(/\\d+/)[0] == String(w)) ev.preventDefault();\r\n        this.item1.children.forEach(function (item) {\r\n          if(item == current) return false;\r\n          if (typeof item.style != 'undefined' && item.style != null && item.style.match(/\\d+/)[0] == String(w)) {\r\n            _this.$set(item,'style',_this.computeStyle('0'));\r\n            ev.preventDefault();\r\n          }\r\n        });\r\n        this.startX = ev.touches[0].clientX;\r\n      }\r\n    },\r\n    _touchMove: function (current) {\r\n      var ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.touches.length == 1) {\r\n        this.moveX = ev.touches[0].clientX;\r\n        this.disX = this.startX - this.moveX;\r\n        if (this.disX < 0 || this.disX == 0) {\r\n          this.$set(current,'style',this.computeStyle('0'));\r\n        } else {\r\n          this.$set(current,'style',this.computeStyle('-' + this.disX));\r\n          if (this.disX >= w) {\r\n            this.$set(current,'style',this.computeStyle('-' + w));\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _touchEnd: function (current) {\r\n      var ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.changedTouches.length == 1) {\r\n        var endX = ev.changedTouches[0].clientX;\r\n        this.disX = this.startX - endX;\r\n        if (this.disX < w / 2) {\r\n          this.$set(current,'style',this.computeStyle('0'));\r\n        } else {\r\n          this.$set(current,'style',this.computeStyle('-' + w));\r\n        }\r\n      }\r\n    },\r\n    deleteItem: function (item, index) {\r\n      item.splice(index, 1);\r\n    }\r\n  }\r\n});\r\n\r\nVue.component('del-item', DelItem);  //注册全局组件del-item\r\n\r\nnew Vue({\r\n  el: \"#el\",\r\n  data: {\r\n    dataList: [],\r\n  },\r\n  mounted: function () {\r\n    this.dataList = [\r\n      {\r\n        name: 2018,\r\n        children: [\r\n          {\r\n            name: \"2018-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"//baidu.com\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"//baidu.com\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            name: \"2018-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"//baidu.com\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"//baidu.com\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        name: 2017,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2017-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            name: \"2017-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n    var _this = this;\r\n    this.dataList.forEach(function (item) {\r\n      _this.$set(item, 'show', false);\r\n      item.children.forEach(function (item2) {\r\n        _this.$set(item2, 'show', false);\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    resetDelStatus: function () {\r\n      var _this = this;\r\n      this.dataList.forEach(function (item) {\r\n        item.children.forEach(function (item2) {\r\n          item2.children.forEach(function (item3) {\r\n            if(typeof item3.style != 'undefined' && Number(item3.style.match(/\\d+/)) != 0){\r\n              _this.$set(item3, 'style', 'transform: translateX(0px)');\r\n            }\r\n          });\r\n        });\r\n      });\r\n    },\r\n    toggle: function (current) {\r\n      this.dataList.forEach(function (item) {\r\n        if (item == current) {\r\n          item.show = !item.show;\r\n        } else {\r\n          item.show = false;\r\n        }\r\n        item.children.forEach(function (item2) {\r\n          if (item2.show) {\r\n            item2.show = false;\r\n          }\r\n        });\r\n      });\r\n      this.resetDelStatus();\r\n    },\r\n    toggle2(current) {\r\n      this.dataList.forEach(function (item) {\r\n        item.children.forEach(function (item2) {\r\n          if (item2 == current) {\r\n            item2.show = !item2.show;\r\n          } else {\r\n            item2.show = false;\r\n          }\r\n        });\r\n      });\r\n      this.resetDelStatus();\r\n    }\r\n  }\r\n});\r\n"]}