<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>demo</title>
</head>

<body>
  <script>
    var api = 'https://www.tianqiapi.com/api/?version=v1&city=青岛';

    // type 1
    if (self.fetch) {
      console.log('run my fetch request here')
      fetch(api, {
          method: 'POST', // default: get
        })
        .then(response => response.json())
        .then(json =>
          console.log('Success:', json)
        )
        .catch(error => console.log('Error:', error))
    } else {
      console.log('do something width XHLHttpRequest')
    }

    // type 2
    postData(api, {
      version: 'v1',
      city: '青岛'
    }).then(function (json) {
      console.log('Success:', json)
    }).catch(function (error) {
      console.log('Error:', error)
    })

    function postData(url, data) {
      return fetch(url, {
        // cache: 'no-cache',
        // credentials: 'some-origin',
        // headers: {
        //   // 'user-agent': 'Mozilla/4.0 MDN Example',
        //   'content-type': 'application/json'
        // },
        method: 'POST',
        // mode: 'no-cors', // cors
        body: JSON.stringify(data),
        // redirect: 'follow',
        // referrer: 'no-referrer'
      }).then(response => response.json())
    }

    // type 3
    fetch(api, {
        method: 'POST', // or 'PUT'
        body: JSON.stringify({
          version: 'v1',
          city: '青岛'
        }), // data can be `string` or {object}!
        // mode: 'no-cors',
        // headers: new Headers({
        //   'Content-Type': 'application/json'
        // })
      }).then(res => res.json())
      .catch(error => console.error('Error:', error))
      .then(response => console.log('Success:', response));
  </script>
</body>

</html>