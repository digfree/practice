{"version":3,"sources":["test.js"],"names":["DelItem","Vue","extend","props","template","data","startX","moveX","disX","txtStyle","computed","methods","_touchStart","ev","event","touches","length","len","$refs","currentItem","parentNode","children","idx","getAttribute","i","getElementsByTagName","setAttribute","clientX","_touchMove","w","remove","offsetWidth","_touchEnd","changedTouches","endX","deleteItem","item","index","splice","component","el","dataList","mounted","show","name","url","toggle","target"],"mappings":";;AAAA,IAAIA,UAAUC,IAAIC,MAAJ,CAAW;AACvBC,SAAM,CAAC,OAAD,EAAS,OAAT,EAAiB,QAAjB,CADiB;AAEvBC,YAAS,2CACR,uBADQ,GAEP,iGAFO,GAGP,IAHO,GAIJ,mCAJI,GAKJ,iCALI,GAMJ,uBANI,GAOJ,oBAPI,GAQJ,gBARI,GASN,MATM,GAUR,MAVQ,GAWR,OAbsB;AAcvBC,QAAM,gBAAW;AACf,WAAO;AACLC,cAAQ,CADH,EACM;AACXC,aAAO,CAFF,EAEK;AACVC,YAAM,CAHD,EAGI;AACTC,gBAAU;AAJL,KAAP;AAMD,GArBsB;AAsBvBC,YAAU,EAtBa;AAwBvBC,WAAS;AACPC,iBAAa,qBAASC,EAAT,EAAa;AACxBA,WAAKA,MAAMC,KAAX;AACA,UAAID,GAAGE,OAAH,CAAWC,MAAX,IAAqB,CAAzB,EAA4B;AAC1B,YAAIC,MAAM,KAAKC,KAAL,CAAWC,WAAX,CAAuBC,UAAvB,CAAkCC,QAAlC,CAA2CL,MAArD;AACA,YAAIM,MAAM,KAAKJ,KAAL,CAAWC,WAAX,CAAuBI,YAAvB,CAAoC,OAApC,CAAV;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAEP,GAAhB,EAAoBO,GAApB,EAAwB;AACtB,cAAGA,KAAKF,GAAR,EAAa;AACb,eAAKJ,KAAL,CAAWC,WAAX,CAAuBC,UAAvB,CAAkCC,QAAlC,CAA2CG,CAA3C,EAA8CC,oBAA9C,CAAmE,GAAnE,EAAwE,CAAxE,EAA2EC,YAA3E,CAAwF,OAAxF,EAAgG,4BAAhG;AACD;AACD,aAAKpB,MAAL,GAAcO,GAAGE,OAAH,CAAW,CAAX,EAAcY,OAA5B;AACD;AACF,KAZM;AAaPC,gBAAY,oBAASf,EAAT,EAAa;AACvBA,WAAKA,MAAMC,KAAX;AACA,UAAIe,IAAI,KAAKX,KAAL,CAAWY,MAAX,CAAkBC,WAA1B;AACA,UAAIlB,GAAGE,OAAH,CAAWC,MAAX,IAAqB,CAAzB,EAA4B;AAC1B,aAAKT,KAAL,GAAaM,GAAGE,OAAH,CAAW,CAAX,EAAcY,OAA3B;AACA,aAAKnB,IAAL,GAAY,KAAKF,MAAL,GAAc,KAAKC,KAA/B;AACA,YAAI,KAAKC,IAAL,GAAY,CAAZ,IAAiB,KAAKA,IAAL,IAAa,CAAlC,EAAqC;AACnC,eAAKC,QAAL,GAAgB,4BAAhB;AACD,SAFD,MAEO;AACL,eAAKA,QAAL,GAAgB,4BAA4B,KAAKD,IAAjC,GAAwC,KAAxD;AACA,cAAI,KAAKA,IAAL,IAAaqB,CAAjB,EAAoB;AAClB,iBAAKpB,QAAL,GAAgB,4BAA4BoB,CAA5B,GAAgC,KAAhD;AACD;AACF;AACF;AACF,KA5BM;AA6BPG,eAAW,mBAASnB,EAAT,EAAa;AACtBA,WAAKA,MAAMC,KAAX;AACA,UAAIe,IAAI,KAAKX,KAAL,CAAWY,MAAX,CAAkBC,WAA1B;AACA,UAAIlB,GAAGoB,cAAH,CAAkBjB,MAAlB,IAA4B,CAAhC,EAAmC;AACjC,YAAIkB,OAAOrB,GAAGoB,cAAH,CAAkB,CAAlB,EAAqBN,OAAhC;AACA,aAAKnB,IAAL,GAAY,KAAKF,MAAL,GAAc4B,IAA1B;AACA,YAAI,KAAK1B,IAAL,GAAYqB,IAAI,CAApB,EAAuB;AACrB,eAAKpB,QAAL,GAAgB,4BAAhB;AACD,SAFD,MAEO;AACL,eAAKA,QAAL,GAAgB,4BAA4BoB,CAA5B,GAAgC,KAAhD;AACD;AACF;AACF,KAzCM;AA0CPM,gBAAY,oBAASC,IAAT,EAAeC,KAAf,EAAsB;AAChCD,WAAKE,MAAL,CAAYD,KAAZ,EAAmB,CAAnB;AACA,WAAK5B,QAAL,GAAgB,4BAAhB;AACD;AA7CM;AAxBc,CAAX,CAAd;;AAyEAR,IAAIsC,SAAJ,CAAc,UAAd,EAAyBvC,OAAzB,E,CAAoC;;AAEpC,IAAIC,GAAJ,CAAQ;AACNuC,MAAI,KADE;AAENnC,QAAM;AACJoC,cAAU;AADN,GAFA;AAKNC,WAAS,mBAAW;AAClB,SAAKD,QAAL,GAAgB,CACd;AACEE,YAAM,KADR;AAEEC,YAAM,IAFR;AAGEvB,gBAAU,CACR;AACEsB,cAAM,KADR;AAEEC,cAAM,SAFR;AAGEvB,kBAAU,CACR;AACEuB,gBAAM,KADR;AAEEC,eAAK;AAFP,SADQ,EAKR;AACED,gBAAM,KADR;AAEEC,eAAK;AAFP,SALQ,EASR;AACED,gBAAM,KADR;AAEEC,eAAK;AAFP,SATQ;AAHZ,OADQ,EAmBR;AACEF,cAAM,KADR;AAEEC,cAAM,SAFR;AAGEvB,kBAAU,CACR;AACEuB,gBAAM,KADR;AAEEC,eAAK;AAFP,SADQ,EAKR;AACED,gBAAM,KADR;AAEEC,eAAK;AAFP,SALQ,EASR;AACED,gBAAM,KADR;AAEEC,eAAK;AAFP,SATQ;AAHZ,OAnBQ;AAHZ,KADc,EA2Cd;AACEF,YAAM,KADR;AAEEC,YAAM,IAFR;AAGEvB,gBAAU,CACR;AACEsB,cAAM,KADR;AAEEC,cAAM,SAFR;AAGEvB,kBAAU,CACR;AACEuB,gBAAM,KADR;AAEEC,eAAK;AAFP,SADQ,EAKR;AACED,gBAAM,KADR;AAEEC,eAAK;AAFP,SALQ,EASR;AACED,gBAAM,KADR;AAEEC,eAAK;AAFP,SATQ;AAHZ,OADQ,EAmBR;AACEF,cAAM,KADR;AAEEC,cAAM,SAFR;AAGEvB,kBAAU,CACR;AACEuB,gBAAM,KADR;AAEEC,eAAK;AAFP,SADQ,EAKR;AACED,gBAAM,KADR;AAEEC,eAAK;AAFP,SALQ,EASR;AACED,gBAAM,KADR;AAEEC,eAAK;AAFP,SATQ;AAHZ,OAnBQ;AAHZ,KA3Cc,CAAhB;AAsFD,GA5FK;AA6FNlC,WAAS;AACPmC,YAAQ,gBAASV,IAAT,EAAe;AACrB,UAAIvB,KAAKA,MAAMC,KAAf;AACAsB,WAAKO,IAAL,GAAY,CAACP,KAAKO,IAAlB;AACA,UAAGP,KAAKO,IAAR,EAAa;AACX,YAAI1B,MAAMJ,GAAGkC,MAAH,CAAU3B,UAAV,CAAqBA,UAArB,CAAgCC,QAAhC,CAAyCL,MAAnD;AACA,YAAIM,MAAMT,GAAGkC,MAAH,CAAUxB,YAAV,CAAuB,OAAvB,CAAV;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAEP,GAAhB,EAAoBO,GAApB,EAAwB;AACtB,cAAGA,KAAKF,GAAR,EAAa;AACbT,aAAGkC,MAAH,CAAU3B,UAAV,CAAqBA,UAArB,CAAgCC,QAAhC,CAAyCG,CAAzC,EAA4CC,oBAA5C,CAAiE,IAAjE,EAAuE,CAAvE,EAA0EC,YAA1E,CAAuF,OAAvF,EAA+F,eAA/F;AACAb,aAAGkC,MAAH,CAAU3B,UAAV,CAAqBA,UAArB,CAAgCC,QAAhC,CAAyCG,CAAzC,EAA4CC,oBAA5C,CAAiE,GAAjE,EAAsE,CAAtE,EAAyEC,YAAzE,CAAsF,OAAtF,EAA8F,EAA9F;AACD;AACF;AACF;AAbM;AA7FH,CAAR","file":"main.js","sourcesContent":["var DelItem = Vue.extend({\r\n  props:['item1','item2','index2'],\r\n  template:'<li ref=\"currentItem\" :index=\"index2\">'\r\n  +'<a :href=\"item2.url\">'\r\n  + '<span class=\"del-btn\" @click.prevent=\"deleteItem(item1.children,index2)\" ref=\"remove\">删除</span>'\r\n  + '<p'\r\n    +  '@touchstart.prevent=\"_touchStart\"'\r\n    +  '@touchmove.prevent=\"_touchMove\"'\r\n    +  '@touchend=\"_touchEnd\"'\r\n    +  ':style=\"txtStyle\">'\r\n    +  '{{item2.name}}'\r\n    +'</p>'\r\n  +'</a>'\r\n  +'</li>',\r\n  data: function() {\r\n    return {\r\n      startX: 0, //触摸位置\r\n      moveX: 0, //滑动时的位置\r\n      disX: 0, //移动距离\r\n      txtStyle: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    _touchStart: function(ev) {\r\n      ev = ev || event;\r\n      if (ev.touches.length == 1) {\r\n        var len = this.$refs.currentItem.parentNode.children.length;\r\n        var idx = this.$refs.currentItem.getAttribute('index');\r\n        for(var i = 0;i<len;i++){\r\n          if(i == idx) continue;\r\n          this.$refs.currentItem.parentNode.children[i].getElementsByTagName('p')[0].setAttribute('style',\"transform: translateX(0px)\");\r\n        }\r\n        this.startX = ev.touches[0].clientX;\r\n      }\r\n    },\r\n    _touchMove: function(ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.touches.length == 1) {\r\n        this.moveX = ev.touches[0].clientX;\r\n        this.disX = this.startX - this.moveX;\r\n        if (this.disX < 0 || this.disX == 0) {\r\n          this.txtStyle = \"transform: translateX(0px)\";\r\n        } else {\r\n          this.txtStyle = \"transform: translateX(-\" + this.disX + \"px)\";\r\n          if (this.disX >= w) {\r\n            this.txtStyle = \"transform: translateX(-\" + w + \"px)\";\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _touchEnd: function(ev) {\r\n      ev = ev || event;\r\n      var w = this.$refs.remove.offsetWidth;\r\n      if (ev.changedTouches.length == 1) {\r\n        var endX = ev.changedTouches[0].clientX;\r\n        this.disX = this.startX - endX;\r\n        if (this.disX < w / 2) {\r\n          this.txtStyle = \"transform: translateX(0px)\";\r\n        } else {\r\n          this.txtStyle = \"transform: translateX(-\" + w + \"px)\";\r\n        }\r\n      }\r\n    },\r\n    deleteItem: function(item, index) {\r\n      item.splice(index, 1);\r\n      this.txtStyle = \"transform: translateX(0px)\";\r\n    }\r\n  }\r\n});\r\n\r\nVue.component('del-item',DelItem);  //注册全局组件del-item\r\n\r\nnew Vue({\r\n  el: \"#el\",\r\n  data: {\r\n    dataList: [],\r\n  },\r\n  mounted: function() {\r\n    this.dataList = [\r\n      {\r\n        show: false,\r\n        name: 2018,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2018-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"//baidu.com\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章3\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            show: false,\r\n            name: \"2018-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章3\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        show: false,\r\n        name: 2017,\r\n        children: [\r\n          {\r\n            show: false,\r\n            name: \"2017-01\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章3\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            show: false,\r\n            name: \"2017-02\",\r\n            children: [\r\n              {\r\n                name: \"文章1\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章2\",\r\n                url: \"#\"\r\n              },\r\n              {\r\n                name: \"文章3\",\r\n                url: \"#\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n  },\r\n  methods: {\r\n    toggle: function(item) {\r\n      var ev = ev || event;\r\n      item.show = !item.show;\r\n      if(item.show){\r\n        var len = ev.target.parentNode.parentNode.children.length;\r\n        var idx = ev.target.getAttribute('index');\r\n        for(var i = 0;i<len;i++){\r\n          if(i == idx) continue;\r\n          ev.target.parentNode.parentNode.children[i].getElementsByTagName('ul')[0].setAttribute('style','display: none');\r\n          ev.target.parentNode.parentNode.children[i].getElementsByTagName('p')[0].setAttribute('class','');\r\n        }\r\n      }\r\n    }\r\n  }\r\n});\r\n"]}